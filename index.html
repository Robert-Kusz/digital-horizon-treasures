<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Horizon Treasures</title>

<meta name="theme-color" content="#000000">
<link rel="manifest" href="/manifest.json">

<!-- OneSignal -->
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
  background: linear-gradient(180deg, #0b0b0b, #000);
  color: gold;
  text-align: center;
}

header {
  padding: 22px;
  font-size: 1.6rem;
  border-bottom: 1px solid rgba(255,215,0,.35);
}

nav {
  position: sticky;
  top: 0;
  background: #000;
  padding: 12px;
  display: flex;
  justify-content: center;
  gap: 10px;
}

nav a {
  padding: 10px 14px;
  border-radius: 20px;
  border: 1px solid rgba(255,215,0,.4);
  color: gold;
  text-decoration: none;
  font-size: .85rem;
}

.button {
  display: block;
  margin: 16px auto;
  padding: 16px;
  width: 85%;
  max-width: 360px;
  background: #000;
  border-radius: 14px;
  border: 1px solid rgba(255,215,0,.4);
  color: gold;
  font-size: 1rem;
  cursor: pointer;
}

iframe {
  width: 100%;
  height: 75vh;
  border: none;
}

#pushStatus {
  font-size: .8rem;
  opacity: .8;
}
</style>
</head>

<body>
<div id="installHelp" style="
  background:#000;
  border:1px solid gold;
  padding:14px;
  margin:12px;
  border-radius:12px;
  font-size:.85rem;
">
  üì≤ <strong>Install for LIVE alerts</strong><br>
  iPhone: Tap <strong>Share ‚¨ÜÔ∏è</strong> ‚Üí <strong>Add to Home Screen</strong>
</div>

<header>üíé Digital Horizon Treasures</header>

<div class="button" onclick="enablePush()">üîî Enable Notifications</div>
<p id="pushStatus">Tap to enable notifications for LIVE alerts</p>

<nav>
  <a href="#shop">üõçÔ∏è Shop</a>
  <a href="https://www.tiktok.com/@digital.horizon.p">üé• TikTok LIVE</a>
</nav>

<section id="shop">
  <iframe src="https://www.digitalhorizonphotography.co.uk/shop/" loading="lazy"></iframe>
  <a class="button" href="https://www.digitalhorizonphotography.co.uk/shop/" target="_blank">
    üîó Open Full Shop
  </a>
</section>

<script>
/* Register Service Worker */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js");
}

/* Initialise OneSignal AFTER load */
window.addEventListener("load", function () {
  window.OneSignal = window.OneSignal || [];
  OneSignal.push(function () {
    OneSignal.init({
      appId: "55439cf3-66fa-44a2-adf1-8c97cd0b88b3",
      notifyButton: { enable: false }
    });
  });
});

/* Enable Push (SAFE VERSION) */
function enablePush() {
  if (!window.OneSignal || !OneSignal.push) {
    alert("Push system still loading, please wait 2 seconds.");
    return;
  }

  OneSignal.push(function () {
    OneSignal.isPushNotificationsEnabled().then(function (enabled) {
      if (enabled) {
        document.getElementById("pushStatus").innerText =
          "‚úÖ Notifications already enabled";
      } else {
        OneSignal.showSlidedownPrompt();
        document.getElementById("pushStatus").innerText =
          "üì≤ Check your Safari prompt above";
      }
    });
  });
}
</script>

</body>
</html>
